/**
 * An even better animation frame.
 *
 * @copyright Oleg Slobodskoi 2013
 * @website https://github.com/kof/animationFrame
 * @license MIT
 */
!function(t){"use strict";function e(t){return this instanceof e?(t||(t={}),"number"==typeof t&&(t={frameRate:t}),null!=t.useNative||(t.useNative=!0),this.options=t,this.frameRate=t.frameRate||e.FRAME_RATE,this._frameLength=1e3/this.frameRate,this._isCustomFrameRate=this.frameRate!==e.FRAME_RATE,this._timeoutId=null,this._callbacks={},this._lastTickTime=0,void(this._tickCounter=0)):new e(t)}var n,i;!function(){var a,o,r=["webkit","moz","ms","o"];try{t.top.name,o=t.top}catch(s){o=t}for(n=o.requestAnimationFrame,i=o.cancelAnimationFrame||o.cancelRequestAnimationFrame,a=0;a<r.length&&!n;a++)n=o[r[a]+"RequestAnimationFrame"],i=o[r[a]+"CancelAnimationFrame"]||o[r[a]+"CancelRequestAnimationFrame"];n&&n(function(){e.hasNative=!0})}(),e.FRAME_RATE=60,e.shim=function(n){var i=new e(n);return t.requestAnimationFrame=function(t){return i.request(t)},t.cancelAnimationFrame=function(t){return i.cancel(t)},i},e.now=Date.now||function(){return(new Date).getTime()},e.navigationStart=e.now(),e.perfNow=function(){return t.performance&&t.performance.now?t.performance.now():e.now()-e.navigationStart},e.hasNative=!1,e.prototype.request=function(i){var a,o=this;if(++this._tickCounter,e.hasNative&&o.options.useNative&&!this._isCustomFrameRate)return n(i);if(!i)throw new TypeError("Not enough arguments");return null==this._timeoutId&&(a=this._frameLength+this._lastTickTime-e.now(),0>a&&(a=0),this._timeoutId=t.setTimeout(function(){var t;o._lastTickTime=e.now(),o._timeoutId=null,++o._tickCounter;for(t in o._callbacks)o._callbacks[t]&&(e.hasNative&&o.options.useNative?n(o._callbacks[t]):o._callbacks[t](e.perfNow()),delete o._callbacks[t])},a)),this._callbacks[this._tickCounter]=i,this._tickCounter},e.prototype.cancel=function(t){e.hasNative&&this.options.useNative&&i(t),delete this._callbacks[t]},"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):t.AnimationFrame=e}(window);