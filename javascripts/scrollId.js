jQuery.fn.scrollParent=function(){var t=/(auto|scroll)/,e=this.css("position"),l="absolute"===e,n=this.parents().filter(function(){var e=$(this);return l&&"static"===e.css("position")?!1:t.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==e&&n.length?n:$(this[0].ownerDocument||document)};var ScrollId;!function(t){var e=function(){function t(t,e,l){var n=this;this.$window=t,this.$location=e,this.$timeout=l,this.restrict="A",this.link=function(t,e,l){if(null==t.scrollElements){t.scrollElements=[];var r=function(){if(0!=t.scrollElements.length){var e=t.scrollElements[0].element.scrollParent().scrollTop();if(!(Math.abs(e-t.scrollPosition)<1)){t.scrollPosition=e;for(var l=t.scrollElements.length,r=0;l>r;r++){var o=t.scrollElements[r];if(e-o.start>=-1&&e-(o.start+o.height)<=1&&null!=o.element){var i=o.element.attr("id");if(null==o.urlId&&n.$location.hash()!=i){t.$applyAsync(function(){n.$location.hash(i)});break}if(null!=o.urlId){var s=n.$location.search()[o.urlId];if(s!=i){t.$applyAsync(function(){n.$location.search(o.urlId,i)});break}}}}}}};t.intervalId=setInterval(r,30)}t.resizeCallbackSet||(t.resizeCallbackSet=!0,angular.element(n.$window).on("resize",function(){n.resize(t)})),t.$on("$destroy",function(){clearInterval(t.intervalId),angular.element(n.$window).off("resizeend")});var o={element:e,start:e[0].getBoundingClientRect().top,height:e.outerHeight(),urlId:l.scrollId.length>0?l.scrollId:null};if(t.scrollElements.push(o),t.scrollElements.sort(function(t,e){return t.start-e.start}),null==o.urlId&&n.$location.hash()!=o.element.attr("id"))t.$applyAsync(function(){o.element.scrollParent().scrollTop(o.start)});else if(null!=o.urlId){var i=n.$location.search()[o.urlId];i==o.element.attr("id")&&t.$applyAsync(function(){o.element.scrollParent().scrollTop(o.start)})}},this.resize=function(t){n.$timeout(function(){angular.forEach(t.scrollElements,function(t){t.start=t.element[0].getBoundingClientRect().top,t.height=t.element.outerHeight()})},300)}}return t.factory=function(){var e=function(e,l,n){return new t(e,l,n)};return e.$inject=["$window","$location","$timeout"],e},t}();t.Directive=e}(ScrollId||(ScrollId={})),angular.module("scrollId",[]).directive("scrollId",ScrollId.Directive.factory());