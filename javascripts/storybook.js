var Storybook;!function(o){function t(){var o=this;return{controller:n,link:function(t,e,i,n){var r=function(){if(0!=n.images.length){var o=e.offsetParent().scrollTop();if(!(Math.abs(o-t.scrollPositionLocation)<1)){t.scrollPositionLocation=o;for(var i=n.images.length,r=0;i>r;r++){var a=n.images[r];o-a.offset>=-1&&o-(a.offset+a.height)<=1&&n.lastSetPath.indexOf(a.path)<0&&(n.showImage(a),n.lastSetPath=a.path)}}}};t.intervalId=setInterval(r,30),t.$on("$destroy",function(){clearInterval(t.intervalId),angular.element(o.$window).off("resizeend")})}}}function e(){return{require:"^storybook",link:function(o,t,e,i){var n={element:t,path:e.scrollStoryImage,offset:t.offset().top,height:t.outerHeight(),size:e.imageSize};i.addImage(n)}}}function i(){return{require:"^storybook",link:function(o,t,e,i){i.addImageLocation(o);var n=t.find(".story-image").css("background-image");n&&(i.lastSetPath=n.substring(4,n.length-1)),o.showImage=function(o){var e=300,i=$(t.find(".story-image")[0]),n=i.clone().css({"background-image":"url("+o.path+")",opacity:0,"background-size":null==o.size?"cover":o.size});n.prependTo(t).animate({opacity:1},e),$.when(i.animate({opacity:0},e)).then(function(){i.remove()})}}}}var n=function(){function o(){this.images=[]}return o.prototype.addImageLocation=function(o){this.imageLocation=o},o.prototype.addImage=function(o){this.images.push(o),this.images.sort(function(o,t){return o.offset-t.offset})},o.prototype.showImage=function(o){this.imageLocation&&this.imageLocation.showImage(o)},o}();o.StoryBookController=n,o.Directive=t,o.StoryImageDirective=e,o.StoryImagesLocationDirective=i}(Storybook||(Storybook={})),angular.module("storybook",[]).directive("storybook",["$window",Storybook.Directive]).directive("scrollStoryImage",["$window",Storybook.StoryImageDirective]).directive("storyImages",["$window",Storybook.StoryImagesLocationDirective]);